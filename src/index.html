<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Suprajit DMS - Production Management</title>
        <base href="/" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://primefaces.org" />
        <link rel="icon" type="image/x-icon" href="https://primefaces.org/cdn/primeng/images/favicon.png" />
        <link href="https://fonts.cdnfonts.com/css/lato" rel="stylesheet" />
        <script>
            // Apply saved dark mode immediately to prevent flash
            (function() {
                try {
                    var config = localStorage.getItem('dms_layout_config');
                    if (config) {
                        var parsed = JSON.parse(config);
                        if (parsed.darkTheme) {
                            document.documentElement.classList.add('app-dark');
                        }
                    }
                } catch (e) {}
            })();
        </script>
    </head>

    <body>
        <app-root></app-root>

        <!-- Service Worker Registration for Push Notifications -->
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/custom-sw.js', { scope: '/' })
                        .then(function(registration) {
                            console.log('[SW] Service Worker registered with scope:', registration.scope);
                        })
                        .catch(function(error) {
                            console.warn('[SW] Service Worker registration failed:', error);
                        });
                });
            }
        </script>
    </body>
</html>
